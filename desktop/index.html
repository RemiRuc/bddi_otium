<!DOCTYPE html>
<html>

<head>
    <title>Otium</title>
    <link rel="stylesheet" type="text/css" href="/desktop/css/styles.css" />
    <link rel="stylesheet" type="text/css" href="/both/css/styles.css" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
</head>



<!-- BODY -->

<body>
    <div style="z-index: 10000; position: absolute;"><input id="q" type="number"><button id="go">GO</button></div>
    <!-- background color animation -->
    <div id="background_anim">
    </div>
    <!-- fin background color animation -->

    <!-- fixed logo  -->
        <div class="logo_top_left">
            <img src="/both/assets/img/otium_logo.svg" alt="">
        </div>
    <!-- end fixed logo  -->

    <div id="navigation">

    </div>



    <!----------- 
    ------------- LOAD SCRIPT
    ----------->


    <!-- Lib -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>

    
    <script src="/dev/utils.js"></script>
    <script src="/lib/utils/utils.js"></script>
    <script src="/lib/threejs/build/three.min.js"></script>
    <script src="/lib/threejs/examples/js/loaders/OBJLoader.js"></script>
    <script src="/lib/threejs/examples/js/loaders/MTLLoader.js"></script>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/lib/perlin/perlin.js"></script>

    

    
    <!-- background color animation links 
    <script src="/lib/noise/noise.min.js"></script>
    <script src="/desktop/js/background.js"></script> -->
    <script src="/lib/vanta/vanta.fog.min.js"></script>
    <script src="/lib/vanta/background.js"></script>


    <script src="/class/Result.js"></script>
    <script src="/desktop/js/connexion.js"></script>

    <!-- PAGES -->
    <script src="/class/Page.js"></script>

    <!-- INTRO -->
    <script src="/views/intro/animation-logo.js"></script>
    <script src="/views/intro/intro.js"></script>
    <script src="/views/intro/connexion.js"></script>
    <script src="/views/intro/button_valider.js"></script>
    <script src="/views/intro/timeline.js"></script>
    
    <!-- QUESTION -->
    <script src="/views/questions/q1.js"></script>
    <script src="/views/questions/q2.js"></script>
    <script src="/views/questions/q3.js"></script>
    <script src="/views/questions/q4.js"></script>
    <script src="/views/questions/q5.js"></script>
    <script src="/views/questions/q6.js"></script>
    <script src="/views/questions/q7.js"></script>

    <script src="/views/arborescence.js"></script>

    <script>
        //intro.timeline.displayPage("desktop")
        
        intro.animationLogo.displayPage("desktop")
        document.getElementById("go").addEventListener("click", () => {
            let q = document.getElementById("q").value
            console.log("q"+q)
            questions["q"+q].comeBackTo('desktop')
            socket.emit("pageChange", q)
        })

        socket.on("validationQuestion", (data) => {
            questions["q"+data.from].transitionTo("desktop", questions["q"+data.to])
        })


        window.timeline = {
            lineWidth1: 0,
            lineWidth2: 0,
            lineWidth3: 0,
            lineWidth4: 0,
            lineWidth5: 0,
            lineWidth6: 0,
            lineWidth7: 0,
        }

        socket.on("validationWait", (data) => {
            if (data.actualQuestion == "1"){
                document.querySelector('.q1').style.fill = "#ffffff"
                TweenMax.to(window.timeline, 6, {lineWidth1:300, onUpdate: () => {
                    document.querySelector('.svgLine1').setAttribute('x2',window.timeline.lineWidth1);
                }})
            }
            if (data.actualQuestion == "2"){
                document.querySelector('.q2').style.fill = "#ffffff"
                TweenMax.to(window.timeline, 6, {lineWidth2:300, onUpdate: () => {
                    document.querySelector('.svgLine2').setAttribute('x2',window.timeline.lineWidth2);
                }})
            }
            if (data.actualQuestion == "3"){
                document.querySelector('.q3').style.fill = "#ffffff"
                TweenMax.to(window.timeline, 6, {lineWidth3:300, onUpdate: () => {
                    document.querySelector('.svgLine3').setAttribute('x2',window.timeline.lineWidth3);
                }})
            }
            if (data.actualQuestion == "4"){
                document.querySelector('.q4').style.fill = "#ffffff"
                TweenMax.to(window.timeline, 6, {lineWidth4:300, onUpdate: () => {
                    document.querySelector('.svgLine4').setAttribute('x2',window.timeline.lineWidth4);
                }})
            }
            if (data.actualQuestion == "5"){
                document.querySelector('.q5').style.fill = "#ffffff"
                TweenMax.to(window.timeline, 6, {lineWidth5:300, onUpdate: () => {
                    document.querySelector('.svgLine5').setAttribute('x2',window.timeline.lineWidth5);
                }})
            }
            if (data.actualQuestion == "6"){
                document.querySelector('.q6').style.fill = "#ffffff"
                TweenMax.to(window.timeline, 6, {lineWidth6:300, onUpdate: () => {
                    document.querySelector('.svgLine6').setAttribute('x2',window.timeline.lineWidth6);
                }})
            }
        })

        socket.on("validationCancel", (data) => {
            if (data.actualQuestion == "1"){
                TweenMax.to(window.timeline, 6, {lineWidth1:0, onUpdate: () => {
                    document.querySelector('.svgLine1').setAttribute('x2',window.timeline.lineWidth1);
                }})
            }
            if (data.actualQuestion == "2"){
                TweenMax.to(window.timeline, 6, {lineWidth2:0, onUpdate: () => {
                    document.querySelector('.svgLine2').setAttribute('x2',window.timeline.lineWidth2);
                }})
            }
            if (data.actualQuestion == "3"){
                TweenMax.to(window.timeline, 6, {lineWidth3:0, onUpdate: () => {
                    document.querySelector('.svgLine3').setAttribute('x2',window.timeline.lineWidth3);
                }})
            }
            if (data.actualQuestion == "4"){
                TweenMax.to(window.timeline, 6, {lineWidth4:0, onUpdate: () => {
                    document.querySelector('.svgLine4').setAttribute('x2',window.timeline.lineWidth4);
                }})
            }
            if (data.actualQuestion == "5"){
                TweenMax.to(window.timeline, 6, {lineWidth5:0, onUpdate: () => {
                    document.querySelector('.svgLine5').setAttribute('x2',window.timeline.lineWidth5);
                }})
            }
            if (data.actualQuestion == "6"){
                TweenMax.to(window.timeline, 6, {lineWidth6:0, onUpdate: () => {
                    document.querySelector('.svgLine6').setAttribute('x2',window.timeline.lineWidth6);
                }})
            }
        })
    </script>
</body>

</html>